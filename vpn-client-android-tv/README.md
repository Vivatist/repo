# NovaVPN –¥–ª—è Android TV

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–ª–∏–µ–Ω—Ç NovaVPN –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Android TV. –†–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª NovaVPN v3 —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥ QUIC.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîí **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ NovaVPN v3** (ChaCha20, Curve25519 ECDH, HKDF-SHA256, QUIC stealth)
- üì∫ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è Android TV** (D-pad –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- üîÑ **–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –¢–í (–µ—Å–ª–∏ VPN –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏)
- ‚ö° **0-RTT Resume** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- üîÉ **–ê–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff
- üõ° **–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞** –ø–æ–¥ QUIC Short Header

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android TV —Å Android 5.0+ (API 21+)
- –°–µ—Ç—å: –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É NovaVPN –ø–æ UDP (–ø–æ—Ä—Ç 443)

## –°–±–æ—Ä–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏
- Android Studio Hedgehog (2023.1.1) –∏–ª–∏ –Ω–æ–≤–µ–µ
- JDK 17
- Android SDK 34
- Kotlin 1.9.22

### –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏

```bash
# Debug APK
./gradlew assembleDebug

# Release APK
./gradlew assembleRelease

# APK –±—É–¥–µ—Ç –≤: app/build/outputs/apk/
```

### –°–±–æ—Ä–∫–∞ –∏–∑ VS Code
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **Android for VS Code** –∏–ª–∏ **Gradle for Java**
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `vpn-client-android-tv` –≤ VS Code
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞—á—É `assembleDebug` —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Gradle

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Android TV

```bash
# –ß–µ—Ä–µ–∑ ADB
adb install -r app/build/outputs/apk/debug/app-debug.apk

# –ò–ª–∏ —á–µ—Ä–µ–∑ ADB –ø–æ —Å–µ—Ç–∏
adb connect <IP_—Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞>:5555
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –û—Ç–∫—Ä–æ–π—Ç–µ NovaVPN –∏–∑ –ª–∞—É–Ω—á–µ—Ä–∞ ‚Üí –ù–∞–∂–º–∏—Ç–µ "‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
2. **–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:** –°–µ—Ä–≤–µ—Ä, Email, –ü–∞—Ä–æ–ª—å
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å:** –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è" (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ VPN)
5. **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** –ï—Å–ª–∏ VPN –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –¢–í, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**:

```
domain/     ‚Äî –ú–æ–¥–µ–ª–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç Android)
data/       ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (crypto, protocol, repository, vpn-client)
service/    ‚Äî Android VpnService (TUN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
receiver/   ‚Äî BroadcastReceiver (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)
ui/         ‚Äî Jetpack Compose –¥–ª—è TV (ViewModel + Screen)
```

## –ü—Ä–æ—Ç–æ–∫–æ–ª

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è NovaVPN v2 Protocol:
- TLS 1.2 Application Data –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞
- 1-RTT —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (Curve25519 ECDH)
- ChaCha20-Poly1305 AEAD (handshake)
- Plain ChaCha20 XOR (data, –±–µ–∑ auth tag)
- HMAC-SHA256 (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- HKDF-SHA256 (–≤—ã–≤–æ–¥ –∫–ª—é—á–µ–π)
- Bootstrap PSK (–ø–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –Ω—É–ª–µ–≤—ã–º PSK)
- Keepalive (—Ä–∞–Ω–¥–æ–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π 10-20 —Å–µ–∫)
- Dead-peer detection (–ø–∞—Å—Å–∏–≤–Ω—ã–π, 35/60 —Å–µ–∫)
- –ê–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff)
